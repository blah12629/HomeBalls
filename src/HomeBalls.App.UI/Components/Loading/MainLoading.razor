@inherits HomeBallsComponentBase
@inject IHomeBallsStateContainer State
@inject IJSRuntime JSRuntime

@if (State.LoadingMessage.Value != default)
{
    <div class="w-full mt-3 text-center lg:text-xl">
        <div class="flex justify-center w-full">
            <img src="@IconUrl" class="w-10 h-10 lg:w-15 lg:h-15 animate-spin-partial" id="app-icon-loading" />
        </div>

        <MainLoadingMessage />
    </div>
}

@code {
    protected String? IconUrl { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        State.LoadingMessage.PropertyChanged += OnLoadingMessageChanged;
        IconUrl = await JSRuntime.InvokeAsync<String>("getIconUrl");
    }

    protected virtual void OnLoadingMessageChanged(
        Object? sender,
        HomeBallsPropertyChangedEventArgs e)
    {
        if (e.OldValue == default || e.NewValue == default) StateHasChanged();
    }
}