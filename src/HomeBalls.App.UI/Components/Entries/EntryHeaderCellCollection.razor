@inherits HomeBallsComponentBase
@inject IHomeBallsLoadableDataSource Data

@foreach (var id in BallIds)
{
    <EntryHeaderCell BallId="@id" />
}

@code {
    protected IReadOnlyCollection<UInt16> BallIds { get; set; } =
        new List<UInt16> { }.AsReadOnly();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        Data.Items.DataLoaded += OnItemsLoaded;
    }

    protected virtual void OnItemsLoaded(
        Object? sender,
        TimedActionEndedEventArgs e)
    {
        BallIds = Data.Items
            .Where(item => item.Identifier.Contains("ball"))
            .Select(item => item.Id)
            .ToList().AsReadOnly();

        StateHasChanged();
    }
}